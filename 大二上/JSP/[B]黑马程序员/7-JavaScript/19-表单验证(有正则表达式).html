<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<link href="css/register.css" rel="stylesheet">
	</head>
	<body>
		<div class="form-div">
			<div class="reg-content">
				<h1>欢迎注册</h1>
				<span>已有帐号？</span> <a href="#">登录</a>
			</div>
			<form id="reg-form" action="#" method="get">
				<table>
					<tr>
						<td>用户名</td>
						<td class="inputs">
							<input name="username" type="text" id="username">
							<br>
							<span id="username_err" class="err_msg" style="display: none">用户名不太受欢迎</span>
						</td>
					</tr>
					<tr>
						<td>密码</td>
						<td class="inputs">
							<input name="password" type="password" id="password">
							<br>
							<span id="password_err" class="err_msg" style="display: none">密码格式有误</span>
						</td>
					</tr>
					<tr>
						<td>手机号</td>
						<td class="inputs"><input name="tel" type="text" id="tel">
							<br>
							<span id="tel_err" class="err_msg" style="display: none">手机号格式有误</span>
						</td>
					</tr>
				</table>
				<div class="buttons">
					<input value="注 册" type="submit" id="reg_btn">
				</div>
				<br class="clear">
			</form>
		</div>
		<script>
			// 1 验证用户名是否合法
			// 1.1 获取用户名的输入框
			var usernameInput = document.getElementById('username');

			// 1.2 绑定onblur事件(失去焦点事件)
			usernameInput.onblur = checkUsername;

			function checkUsername() {
				// 1.3 获取用户输入的用户名
				var username = usernameInput.value.trim();

				// 1.4 判断用户名是否合法(长度:6-12位,并由单词字符组成)
				var reg = /^\w{6,12}$/;
				let flag = reg.test(username);
				if (flag) {
					// 符合规则
					document.getElementById('username_err').style.display = "none";
				} else {
					// 不符合规则
					document.getElementById('username_err').style.display = "";
				}
				return flag;
			}

			// 2 验证密码是否合法
			// 2.1 获取密码的输入框
			var passwordInput = document.getElementById('password');

			// 2.2 绑定onblur事件(失去焦点事件)
			passwordInput.onblur = checkPassword;

			function checkPassword() {
				// 2.3 获取用户输入的密码
				var password = passwordInput.value.trim();

				// 2.4 判断密码是否合法(长度:6-12位,并由单词字符组成)
				var reg = /^\w{6,12}$/;
				let flag = reg.test(password);
				if (flag) {
					// 符合规则
					document.getElementById('password_err').style.display = "none";
				} else {
					// 不符合规则
					document.getElementById('password_err').style.display = "";
				}
				return flag;
			}

			// 3 验证手机号是否合法
			// 3.1 获取手机号的输入框
			var telInput = document.getElementById('tel');

			// 3.2 绑定onblur事件(失去焦点事件)
			telInput.onblur = checkTel;

			function checkTel() {
				// 3.3 获取用户输入的手机号
				var tel = telInput.value.trim();

				// 3.4 判断手机号是否合法(长度:6-12位,只能是数字组成,第一位是1)
				var reg = /^[1]\d{10}$/;
				let flag = reg.test(tel);
				if (flag) {
					// 符合规则
					document.getElementById('tel_err').style.display = "none";
				} else {
					// 不符合规则
					document.getElementById('tel_err').style.display = "";
				}
				return flag;
			}

			// 4.1 获取表单对象
			var regFrom = document.getElementById('reg-form');
			// 4.2 绑定onsubmit事件
			regFrom.onsubmit = function() {
				// 4.3 挨个判断是否都合法,若有一个不合法return false
				let flag = checkUsername() && checkPassword() && checkTel()
				return flag;
			}
		</script>
	</body>
</html>
