# 实验二 数据表记录的更新操作（2学时）

### 【实验教学的目的】

掌握在表中添加、更新数据和删除数据的操作。



### 【实验原理】

CREATE语句能创建数据表；使用INSERT INTO语句可向表中插入字段。



### 【实验内容】

**题目：在“网上书店”数据库的相关数据表中插入数据**

**表1 user表数据**

| **uid** | **uname** |    **email**    |  **tnum**   | **score** |
|:-------:|:---------:|:---------------:|:-----------:|:---------:|
|  1001   |  何仙姑   |  Hxg18@163.com  | 13320101991 |    20     |
|  1002   | 平平人生  |  Lp011@126.com  | 13545158219 |    300    |
|  1003   | 四十不惑  |  12345@qq.com   | 18688168818 |   1000    |
|  1004   | 桃花岛主  |  810124@qq.com  | 13068011234 |    600    |
|  1005   |   水灵    |  zs123@371.com  | 15838182503 |    150    |
|  1006   | 感动心灵  | gandong@tom.com | 13641151234 |    500    |

**表2 book表数据**

| **bid** | **bname** | **author** | **price** | **publisher** | **discount** | **cid** |
|:--:|:--:|:--:|:--:|:--:|:--:|:--:|
| 1 | 中国时代 | 师永刚 | 39.0 | 作家出版社 | 27.8 | 1 |
| 2 | 中国历史的屈辱 | 王重旭 | 26.0 | 华夏出版社 | 18.2 | 2 |
| 3 | 择业要趁早 | 海文 | 28.0 | 海天出版社 | 19.3 | 3 |
| 4 | 房间 | 爱玛 | 37.6 | 人民文学出版社 | 26.3 | 4 |
| 5 | 平凡的世界 | 路遥 | 75 | 北京出版社 | 63.75 | 4 |
| 6 | 心灵鸡汤 | 关然 | 27.0 | 大豫出版社 | 20.0 | 3 |
| 7 | 蜕 | 赵婷 | 32.0 | 上海出版社 | 28.5 | 3 |

**表3 category表数据**

| **cid** | **cname** |
|:-------:|:---------:|
|    1    |   历史    |
|    2    |   家教    |
|    3    |   文化    |
|    4    |   小说    |

**表4 b_order表数据**

| **uid** | **bid** | **ordernum** | **orderdate** | **deliverydate** |
|:-------:|:-------:|:------------:|:-------------:|:----------------:|
|  1001   |    1    |      2       |  2016-03-12   |                  |
|  1001   |    3    |      1       |  2016-04-15   |                  |
|  1001   |    1    |      1       |  2016-09-15   |                  |
|  1003   |    7    |      1       |  2015-12-14   |                  |
|  1003   |    3    |      1       |  2016-10-10   |                  |
|  1005   |    5    |      1       |  2015-08-17   |                  |
|  1005   |    7    |      3       |  2016-11-12   |                  |
|  1006   |    5    |      1       |  2016-09-18   |                  |
|  1006   |    1    |      2       |  2016-10-21   |                  |
|  1006   |    7    |      2       |  2015-11-21   |                  |

1. **使用SQL 语句分别向user表（表4-1所示）、book表（表4-2所示）、category表（表4-3所示）、b_order表（表4-4所示）插入记录**

   ```sql
   INSERT INTO user VALUES
   ('1001', '何仙姑', 'Hxg18@163.com', '13320101991', 20),
   ('1002', '平平人生', 'Lp011@126.com', '13545158219', 400),
   ('1003', '四十不惑', '12345@qq.com', '18688168818', 1000),
   ('1004','桃花岛主', '810124@qq.com', '13068011234', 600),
   ('1005', '水灵', 'zs123@371.com', '15838182503', 150),
   ('1006', '感动心理', 'gandong@tom.com', '13641151234', 500);
   
   INSERT INTO book VALUES
   (1, "中国时代", "师永刚", 39.0, "作家出版社", 27.8,1),
   (2, "中国历史的屈辱", "王重旭", 26.0, "华夏出版社", 18.2,2),
   (3, "择业要趁早", "海文", 28.0, "海天出版社", 19.3,3),
   (4, "房间", "爱玛", 37.6, "人民文学出版社", 26.3,4),
   (5, "平凡的世界", "路遥", 75.0, "北京出版社", 63.75,4),
   (6, "心灵鸡汤", "关然", 27.0, "大豫出版社", 20.0,3),
   (7, "蜕", "赵婷", 32.0, "上海出版社", 28.5,3);
   
   INSERT INTO category VALUES
   (1, '历史'),
   (2, '家教'),
   (3, '文化'),
   (4, '小说');
   
   INSERT INTO b_order VALUES (uid, bid, ordernum, orderdate)
   ('1001', 1, 2, '2016-03-12'),
   ('1001', 3, 1, '2016-04-15'),
   ('1001', 1, 1, '2016-09-15'),
   ('1003', 7, 1, '2015-12-14'),
   ('1003', 3, 1, '2016-10-10'),
   ('1005', 5, 1, '2015-08-17'),
   ('1005', 7, 3, '2016-11-12'),
   ('1006', 5, 1, '2016-09-18'),
   ('1006', 1, 2, '2016-10-21'),
   ('1006', 7, 2, '2015-11-21');
   ```

2. **使用SQL语句修改表中记录。**

   1. 把user表中uid为'1001'的uname修改为“何大姑”。

      ```sql
      UPDATE user
      SET uname = '何大姑'
      WHERE uid = '1001';
      ```

   2. b_order表中uid为'1003'且bid为3的订购量改为10,并把orderdate改为“2016-10-01”，deliverydate设为“2016-10-03”。

      ```sql
      UPDATE b_order
      SET ordernum = 10, orderdate = '2016-10-01', deliverydate = '2016-10-03'
      WHERE uid = '1003' AND bid = 3;
      ```

3. **使用SQL语句删除表中记录。**

   1. 删除2015年的订单信息

      ```sql
      DELETE FROM b_order
      WHERE YEAR(orderdate) = 2015;
      ```

   2. 清空category表数据

      ```sql
      TRUNCATE TABLE category;
      ```



### 【主要实验仪器及设备】

计算机、MySQL
